{% load questionnaire %}
{% for choice in qdict.choices %}
    <div class="checkbox">
    	{% if choice.inps%}
        	<label class="checkbox-label"><input name="question_{{ question.sortid }}_{{choice.sortid}}_checkbox_choice" type="checkbox" value="_entry_{{choice.value}}" {% if choice.value in qdict.prev_ans %} checked {% endif %}>{{choice.text}}</label>
            {% for inp in choice.inps %}
                {% if inp.type == 'textarea' %}
                    <div>
                        <textarea name="question_{{ question.sortid }}_{{ choice.sortid}}_checkbox_comment" class="form-control" placeholder="{{ inp.placeholder }}" row="5">{% if qdict.prev_ans %}{% with qdict.prev_ans|choicesplit:"," as answers %}{% for each_ans in answers %}{% if ":" in each_ans%}{% with each_ans|choicesplit:":" as parts %}{% if choice.value == parts.0 %} {{parts.1}} {% endif %}{% endwith %}{% endif %}{% endfor %}{% endwith %}{% endif %}</textarea>
                    </div>
                {% else %}
    			     <label class="checkbox-text-label"><input name="question_{{ question.sortid }}_{{ choice.sortid}}_checkbox_comment" type="text" class="form-control" placeholder="{{ inp.placeholder }}" {% if qdict.prev_ans %}{% with qdict.prev_ans|choicesplit:"," as answers %}{% for each_ans in answers %}{% if ":" in each_ans%}{% with each_ans|choicesplit:":" as parts %}{% if choice.value == parts.0 %} value="{{parts.1}}" {% endif %}{% endwith %}{% endif %}{% endfor %}{% endwith %}{% endif %}></label>
                {% endif %}
            {% endfor %}
    	{% else %}
    		<label class="checkbox-label"><input name="question_{{ question.sortid }}_{{choice.sortid}}_checkbox_choice" type="checkbox" value="{{choice.value}}" {% if choice.value in qdict.prev_ans %} checked {% endif %}>{{choice.text}}</label>
    	{% endif %}
    </div>
{% endfor %}